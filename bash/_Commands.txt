Консольные команды
Пнд, 01/03/2010 - 23:01 — dronan

Terminal-1.5.1.png
Нашел описание некоторых команд, ну и чтобы не забывать где они :), размещу их здесь.
Спасибо доброму человеку
Небольшое отступление:
Пришел к Вам друг (виндовсюзер) с флешкой, или у Вас есть флешка, рабочая, просто по знакомым что то переносить, передавать.....
В любом случае следует ее обезопасить от автоматической записи на нее всяких вредителей...
Что мы делаем?

cd /media/disk 
rm autorun.inf && mkdir autorun.inf 
mkdir autorun.inf/com3

1.Переходим в примонтированное устройство.
2.Удаляем файл который обычно создают вири на флешке (авторан) и создаем сами директорию с тамим же именем.
3.И еще одну....

Все, готово. Теперь вирям надо попробовать перезаписать эти каталоги если они захотят попасть на флешку.

Ну и собственно далее все под кат.....
Еще добавлю восстановление grub 1
Загружаемся с LiveCD,USB..
В терминале:
sudo grub
find /boot/grub/stage1 # получаете (hdx,y)
root (hdx,y)
setup (hdx)
quit

Консольные команды
управляем файлами-пакетами deb в консоли.

Примеры использования утилит dpkg и apt отвечающих за управления пакетами в системах семейства Debian.

DPKG
dpkg -i имя_пакета установит или обновит ранее установленный пакет.
dpkg -r имя_пакета удалит ранее установленный пакет, но сохранит файл конфигурации.
dpkg -l отобразит список всех установленных пакетов.
dpkg -l | grep tux отобразит список всех установленных пакетов с именем "tux".
dpkg -s имя_пакета имя_пакета отобразит информацию по конкретному пакету.
dpkg -P удалит ранее установленный пакет и удалит файл конфигурации.

APT
apt-get install имя_пакета установит пакет.
apt-get update получить список пакетов доступных для обновления.
apt-get upgrade обновит все установленные пакеты.
apt-get remove имя_пакета удалит пакет.
apt-get check поможет узнать о конфликтующих пакетов, а также поломанных зависимостях пакетов .
apt-get -f install исправит выявлены нарушенные зависимости.

Вам могут быть полезны следующие опции:
apt-get -h справка
apt-get -d только загрузить - не устанавливать и не распаковывать архивы
apt-get -s ничего не делать, имитировать выполнение
apt-get -y предполагается ответ Yes на все вопросы, сами вопросы не выводить
apt-get -f продолжать, даже если проверка целостности не удачна
apt-get -u плюс ко всему показывать список обновленных пакетов

Скачанные из сети файлы помещаются в каталог /var/cache/apt/archives их всегда можно найти и удалить используя команду apt-get clean

Работа с сетью.

Wi-Fi
iwconfig Показать конфигурацию беспроводных интерфейсов. Список доп. команд по man iwconfig
iwconfig ra0 essid any пример подключения интерфейса ra0 к любой точке доступа в радиусе

iwlist Подробная информация о беспроводных интерфейсах. Опции команды в man iwlist
iwlist scanningпример, показывает все точки доступа находящиеся в радиусе действия

LAN
ifconfig Показать конфигурацию всех сетевых интерфейсов
ifconfig eth0 Показать конфигурацию сетевого интерфейса eth0
ifup eth0 Активировать сетевой интерфейс eth0
ifdown eth0 Отключить сетевой интерфейс eth0
ifconfig eth0 192.168.1.1 netmask 255.255.255.0 Задать конфигурацию IP адреса
ifconfig eth0 promisc Позволяет получать все пакеты, независимо от того были ли они предназначены для хоста или нет. (Это позволяет анализировать сетевой трафик.)
dhclient eth0 Включить на интерфейсе eth0 режим dhcp
route -n Показать таблицу роутинга
route add -host 10.0.0.1 gw 192.168.1.1 dev eth0 Задать маршрут к удаленному хосту, указывая устройство
route add -net 0/0 gw IP_адрес_шлюза Задать шлюз
route add -net 192.168.0.0 netmask 255.255.0.0 gw 192.168.1.1 настроить статический маршрут для сети 192 .168.0.0/16
route del 0/0 gw IP_адрес_шлюз удалить статический маршрут
echo "1" > /proc/sys/net/ipv4/ip_forward активировать ip маршрутизацию

Samba
smbclient -N -L 192.168.1.10 Просмотр самба шары на хосте
mount -t smbfs -o iocharset=UTF8,codepage=cp866,guest,ro //192.168.1.10/Share /mnt/network/comp/ Монтирование сетевого каталога в Вашу систему
smbget -r -n -u Guest 'smb://192.168.1.10/Movies (f)/Movies/We are.avi' -o weare.avi Автоматическое скачивание файла с докачкой при обрыве

hostname Показать имя хоста
host www.it-talk.ru Получить IP адрес от хоста и наоборот
whois www.it-talk.ru Опросить WHOIS
nslookup www.it-talk.ru Получить IP адрес от хоста и наоборот через проверку DNS-сервера.
ip link show Показать информацию о всех сетевых интерфейсах.
ip link show eth0 Показать информацию интерфейса eth0.
mii-tool eth0 Показать параметры интерфейса eth0.
ethtool eth0 Показать статистику интерфейса eth0.
netstat -p --inet Показать активные соединения
netstat -lp --inet Показать прослушиваемые порты в системе (и кто их слушает)
nmap -p 139 192.168.1-2.1-255 Сканирование диапазона IP-адресов по порту 139

Мониторинг за системными процессами и состоянием жeстких дисков.

Узнать, что запущено.
top Отобразит постоянно обновляющийся список работающих процессов.
ps aux Отобразит список работающих в системе процессов и из владельцев.
pstree Отобразит иерархический список запущенных процессов.
free Отобразит информацию об использовании памяти.
free -m Отобразит информацию об использовании памяти в мегабайтах.

Убить процесс.
kill номер_процесса.

Существует возможность использование команды kill с различными ключами.

kill -l
1) SIGHUP 2) SIGINT 3) SIGQUIT 4) SIGILL
5) SIGTRAP 6) SIGABRT 7) SIGBUS 8) SIGFPE
9) SIGKILL 10) SIGUSR1 11) SIGSEGV 12) SIGUSR2
13) SIGPIPE 14) SIGALRM 15) SIGTERM 16) SIGSTKFLT
17) SIGCHLD 18) SIGCONT 19) SIGSTOP 20) SIGTSTP
21) SIGTTIN 22) SIGTTOU 23) SIGURG 24) SIGXCPU
25) SIGXFSZ 26) SIGVTALRM 27) SIGPROF 28) SIGWINCH
29) SIGIO 30) SIGPWR 31) SIGSYS 34) SIGRTMIN
35) SIGRTMIN+1 36) SIGRTMIN+2 37) SIGRTMIN+3 38) SIGRTMIN+4
39) SIGRTMIN+5 40) SIGRTMIN+6 41) SIGRTMIN+7 42) SIGRTMIN+8
43) SIGRTMIN+9 44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12
47) SIGRTMIN+13 48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14
51) SIGRTMAX-13 52) SIGRTMAX-12 53) SIGRTMAX-11 54) SIGRTMAX-10
55) SIGRTMAX-9 56) SIGRTMAX-8 57) SIGRTMAX-7 58) SIGRTMAX-6
59) SIGRTMAX-5 60) SIGRTMAX-4 61) SIGRTMAX-3 62) SIGRTMAX-2
63) SIGRTMAX-1 64) SIGRTMAX

Файлы и процессы.
lsof -p $$ Отобразит какой процесс работает с файлом или каталогом.
lsof /home/user1 Отобразит какой процесс работает с файлом или каталогом в конкретной директории.

Работа с дисками.
Smart
smartctl -A /dev/hda Вывод информации, поддерживает ли диск SMART.
smartctl -s on /dev/hda Включаем SMART, если выключен.
smartctl -c /dev/hda Проверяем какие возможности SMART поддерживает диск и какие установлены параметры.
smartctl -H /dev/hda Статус состояния диска и список атрибутов проверок.
smartctl -A /dev/hda Статус состояния диска и список атрибутов проверок.
smartctl -t offline /dev/hda Запускаем offline тест.
smartctl -l selftest /dev/hda Смотрим, есть ли ошибки.
smartctl -r ioctl -i /dev/hda Смотрим более детально.
badblocks -v /dev/hda Проводит проверку поверхности диска на читаемость и записываемость.
fsck /dev/hda Проводит проверку диска и пытается по возможности восстановить работоспособность дисковой подсистемы.

Не менее полезные команды

last reboot Покажет историю перезагрузок.
lsmod Отобразит список загруженных модулей ядра.
modprobe -r имя_модуля Выгрузка модуля ядра.
echo 'blacklist имя_модуля' >> /etc/modprobe.d/blacklist Занести модуль в блеклист.
update-rc.d -f daemon defaults Добавление демона.
update-rc.d -f daemon remove Удаление демона.
tail /var/log/dmesg Отобразит сообщения ядра полученные при последней загрузке системы.
tail /var/log/messages Покажет все сообщения о ходе загрузки системы, а также другие сообщения о статусе работающей системы.

Файлы и директории.

Операции с файлами и не только...

Образы дисков
mount -o loop /home/andrew/iso/video.iso /media/iso/ Монтирование в папку ISO образа. Любая программа после этого будет видеть эту папку, как содержимое привода.
readcd dev=/dev/hdc f=dvd.iso Создание ISO образа диска.
mkisofs -allow-lowercase -iso-level 3 -l -o /home/mehome/video/dvd.iso /mnt/windows/video/dvd1/ Создание ISO образа для его последующей записи.
growisofs -dvd-compat -Z /dev/hdd=/home/mehome/video/dvd.iso Запись образа на болванку

Операции с файлами
cd /home перейти в домашний каталог
cd .. перейти на уровень выше
cd ../.. перейти на 2 уровня выше
cd перейти в домашний каталог
cd - перейти в предыдущий каталог
pwd показать путь к текущей директории
ls показать файлы и директории
ls -F показать файлы и директории
ls -l показать подробности о файлах и директориях
ls -a показать скрытые файлы
mkdir dir1 создать директорию с именем dir1
mkdir dir1 dir2 создать директории dir1 и dir2
mkdir -p /tmp/dir1/dir2 создать директорию в указанном месте
rm -f file1 удалить файл с именем file1
rmdir dir1 удалить директорию с именем dir1
rm -rf dir1 удалит директорию dir1 и всё её содержимое
rm -rf dir1 dir2 удалить директории dir1 и dir2 со всем содержимым
mv dir1 new_dir переименовать / переместить директорию
cp [что копировать] [куда копировать]
ln -s cоздать символическую ссылку. [На что сделать ссылку] [имя ссылки]

Перезагрузка и выключение системы.

Список команд linux относящийся к процессам перезагрузки и выключения.

shutdown -h now выключить систему
init 0 выключить систему
telinit 0 выключить систему
shutdown -h hours:minutes & запланировать выключение системы
shutdown -c отменить запланированное выключение
shutdown -r now перезагрузить систему
reboot перезагрузить систему
logout завершить сесию
Если пишет:
Необходимо быть суперпользователем =)
перед самой командой напишите sudo

Общесистемные.

Этим постом я начинаю серию топиков в которых, постараюсь отразить самые интересные и необходимые консольные команды.

hostname сетевое имя машины
whoami имя текущего пользователя
uname -m покажет архитектуру машины
uname -r версия ядра
sudo dmidecode -q информация об аппаратном обеспечении системы, в соответствии с SMBIOS/DMI.
cat /proc/cpuinfo информация о процесоре
cat /proc/interrupts прерывания
cat /proc/meminfo вся информация которая относится к памяти
cat /proc/swaps вся информация про swap
cat /proc/version версия ядра и другая информация
cat /proc/net/dev сетевые интерфейсы и статистика
cat /proc/mounts смонтированные устройства
cat /proc/partitions доступные разделы
cat /proc/modules загруженные модули ядра
lspci -tv PCI устройства
lsusb -tv USB устройства
date текущая дата
cal календарь и текущий месяц
cal 2008 покажет весь 2008 год =)

Дисковое пространство.

Дискового пространства не бывает много.... Его всегда не хватает.
Ниже привожу пару команд позволяющих определить... куда же делось место..

fdisk-l Информация о таблице разделов дисков
df Подробная информация о разделах дисков и свободном месте
ls -lSr |more покажет все файлы в текущей директории в отсортированном по размеру списке
du -sh dir1 Покажет сколько дискового пространства занимает конкретная директория "dir1"
поиск файлов и директорий.

Поиск
Забыли, куда сохраняли? Не беда! В консоли найдётся всё

find / -name file1 искать файлы или директорию начиная с /
find / -user user1 искать файлы и директории относящиеся к user1
find /home/user1 -name \*.bin искать файлы с расширением .bin в директории /home/user1
find /usr/bin -type f -atime +100 искать бинарные файлы, которые не запускались 100 дней
find /usr/bin -type f -mtime -10 найти файлы созданные или изменённые за 10 дней
find / -name \*.deb -exec chmod 755 '{}' \; найти файлы с расширением .deb и изменить права доступа
locate \*.ps найти файлы с расширением .ps
whereis halt показать путь к указанной программе, в данном случае halt
which halt показать полный путь к указанной программе, в данном случае halt
Консольные утилиты
apt-get install netdiag Запуск командой trafshow Показывает в реальном времени все соединения по интерфейсам
apt-get install iptraf Тоже, статистика по интерфейсам в реальном времени
apt-get install mtr-tiny Запуск командой mtrIP. Очень удобный и мощный инструмент для трейса (traceroute) хоста. 